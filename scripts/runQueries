#!/usr/bin/env bash

execrunQueries () {
	FIRST_QUERY="1"
	LAST_QUERY="30"

	#echo "==============================================="
	#echo "cleanup tmp files from previous query runs"
	#echo "==============================================="
	#"$BIG_BENCH_BASH_SCRIPT_DIR/bigBenchCleanQueries.sh"

	echo "checking existence of: $BIG_BENCH_LOGS_DIR"
	if [ ! -d "$BIG_BENCH_LOGS_DIR" ]; then
		if ! mkdir -p "$BIG_BENCH_LOGS_DIR" ; then
			echo "ERROR: cannot write to: $BIG_BENCH_LOGS_DIR, no permission"
			exit 1
		fi
	fi

	echo "==============================================="
	echo "Running queries $FIRST_QUERY-$LAST_QUERY"
	echo "==============================================="

	for (( i = $FIRST_QUERY; i <= $LAST_QUERY; i++ ))
	do
		QUERY_NUMBER=$i
		initQueryEnv
		runBigBenchModule runQuery
	done

	echo "==============================================="
	echo "All queries finished"
	echo "==============================================="
	"$BIG_BENCH_BASH_SCRIPT_DIR/showErrors.sh" 

	"$BIG_BENCH_BASH_SCRIPT_DIR/showTimes.sh" 
	runBigBenchModule zipQueryLogs
}
